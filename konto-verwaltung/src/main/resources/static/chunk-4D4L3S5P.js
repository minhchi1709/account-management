import{a as b,b as V,c as q,d as H,f as K,g as Q,h as W,i as X,j as tt}from"./chunk-ZQN42IPW.js";import{g as x,h as B,i as Z,j as G,l as L,m as J,ma as k,qa as j,ra as N,sa as y,ta as A}from"./chunk-BXJGP4QE.js";import{Cb as C,Eb as l,Mb as T,Nb as a,Ob as I,Pb as $,Qb as g,Va as s,Vb as v,Wa as c,Wb as z,Xb as D,aa as w,ka as f,la as O,lb as h,nb as p,sa as S,ta as M,uc as _,vc as F,wb as n,xb as o,yb as u,yc as U,zb as P}from"./chunk-WF2K2LCF.js";var mt=i=>["months",i];function lt(i,d){if(i&1&&(n(0,"div")(1,"li",1)(2,"div",4)(3,"a",5),a(4),o(),n(5,"div",6),u(6,"span",7)(7,"span",8)(8,"span",9)(9,"span",10)(10,"span",11)(11,"span",12)(12,"span",13),o()()()()),i&2){let t=d.$implicit,e=l();s(3),p("routerLink",z(2,mt,t)),s(),$(" ",e.dateService.getMonthNameDE(t)," ")}}var rt=(()=>{class i{constructor(t,e,r){this.transactionService=t,this.router=e,this.dateService=r,this.months=[],this.year=0}ngOnInit(){this.router.params.subscribe(t=>{this.year=t.year,this.transactionService.getAllMonths({year:this.year}).subscribe({next:e=>{this.months=e.map(r=>this.capitalize(r))},error:e=>console.log(e)})})}capitalize(t){let e=t.toLowerCase();return e.charAt(0).toUpperCase()+e.slice(1)}static{this.\u0275fac=function(e){return new(e||i)(c(b),c(x),c(y))}}static{this.\u0275cmp=f({type:i,selectors:[["app-navigation-year"]],standalone:!0,features:[v],decls:5,vars:1,consts:[[1,"nav","flex-column"],[1,"nav-item"],["aria-disabled","true",1,"nav-link","disabled"],[4,"ngFor","ngForOf"],["routerLinkActive","active",1,"box"],[1,"nav-link","nav-nav",3,"routerLink"],[1,"space"],[1,"star",2,"--i","31"],[1,"star",2,"--i","12"],[1,"star",2,"--i","57"],[1,"star",2,"--i","93"],[1,"star",2,"--i","23"],[1,"star",2,"--i","70"],[1,"star",2,"--i","6"]],template:function(e,r){e&1&&(n(0,"ul",0)(1,"li",1)(2,"a",2),a(3,"Monat ausw\xE4hlen"),o()(),h(4,lt,13,4,"div",3),o()),e&2&&(s(4),p("ngForOf",r.months))},dependencies:[_,Z,G],styles:["a[_ngcontent-%COMP%]{color:#000}"]})}}return i})();var ot=(()=>{class i{static{this.\u0275fac=function(e){return new(e||i)}}static{this.\u0275cmp=f({type:i,selectors:[["app-overview-page"]],standalone:!0,features:[v],decls:6,vars:0,consts:[[1,"row",2,"height","100%"],[1,"col-1"],[1,"col",2,"height","100%"]],template:function(e,r){e&1&&(n(0,"div",0)(1,"div",1),u(2,"app-navigation-year"),o(),n(3,"div",2),u(4,"app-create-transaction")(5,"router-outlet"),o()())},dependencies:[tt,rt,B]})}}return i})();function ht(i,d){if(i&1&&(n(0,"h1",7),a(1),o()),i&2){let t=l(2);s(),g(" Aktuelle Summe: ",t.currentSum.toFixed(2)," \u20AC | ",t.currencyManagementService.numberInVND(t.Math.round(t.currentSum)*t.rate)," VND ")}}function ft(i,d){if(i&1){let t=P();n(0,"button",11),C("click",function(){S(t);let r=l().$implicit,m=l(2);return M(m.addToSum(r))}),n(1,"mat-icon"),a(2,"add"),o()()}}function vt(i,d){if(i&1){let t=P();n(0,"button",12),C("click",function(){S(t);let r=l().$implicit,m=l(2);return M(m.removeFromSum(r))}),n(1,"mat-icon"),a(2,"remove"),o()()}}function gt(i,d){if(i&1){let t=P();n(0,"tbody")(1,"tr")(2,"td"),a(3),o(),n(4,"td"),a(5),o(),n(6,"td"),a(7),o(),n(8,"td")(9,"button",8),C("click",function(){let r=S(t).$implicit,m=l(2);return M(m.editTransaction(m.transactions[r]))}),n(10,"mat-icon"),a(11,"edit"),o()()(),n(12,"td")(13,"button",9),C("click",function(){let r=S(t).$implicit,m=l(2);return M(m.deleteTransaction(m.transactions[r]))}),n(14,"mat-icon"),a(15,"delete"),o()()(),n(16,"td"),h(17,ft,3,0,"button",10)(18,vt,3,0,"ng-template",null,1,D),o()()()}if(i&2){let t=d.$implicit,e=T(19),r=l(2);s(3),I(r.dateService.reformatDate(r.transactions[t].transaction.date||"")),s(2),g("",r.currencyManagementService.numberInEUR(r.transactions[t].transaction.value)," | ",r.currencyManagementService.numberInVND(r.Math.round(((r.transactions[t]==null?null:r.transactions[t].transaction.value)||1)*r.rate)),""),s(2),I(r.transactions[t].transaction.description),s(10),p("ngIf",!r.transactions[t].included)("ngIfElse",e)}}function _t(i,d){if(i&1&&(n(0,"div"),u(1,"app-graph",3),h(2,ht,2,2,"h1",4),n(3,"table",5)(4,"thead")(5,"tr")(6,"th"),a(7,"Datum"),o(),n(8,"th"),a(9,"Betrag"),o(),n(10,"th"),a(11,"Zweck"),o(),u(12,"th")(13,"th")(14,"th"),o()(),h(15,gt,20,6,"tbody",6),n(16,"tbody")(17,"tr")(18,"th"),a(19,"Summe"),o(),n(20,"td"),a(21),o()()()()()),i&2){let t=l();s(),p("title",t.title)("usingDate",!0)("vibDataPoints",t.dataPoints)("xTitle",t.xTitle)("yTitle",t.yTitle),s(),p("ngIf",t.indexes.length),s(13),p("ngForOf",t.Array.from(t.Array(t.transactions.length).keys())),s(6),g("",t.currencyManagementService.numberInEUR(t.sum)," | ",t.currencyManagementService.numberInVND(t.Math.round(t.sum*t.rate))," ")}}function xt(i,d){i&1&&u(0,"app-loader")}var at=(()=>{class i{constructor(t,e,r,m,R,Y){this.transactionService=t,this.router=e,this.dateService=r,this.currencyService=m,this.currencyManagementService=R,this.observer=Y,this.loaded=!1,this.rate=1,this.year=0,this.month="",this.transactions=[],this.indexes=[],this.sum=0,this.dataPoints=[],this.currentSum=0,this.title="",this.xTitle="",this.yTitle="",this.Math=Math,this.Array=Array}ngOnInit(){this.observer.objectUpdate$.subscribe(t=>{t&&this.init()}),this.currencyService.getTodayRate({bank:"vib"}).subscribe({next:t=>{this.rate=t.rate||0}}),this.year=Number(window.location.href.split("/")[4]),this.router.params.subscribe(t=>{this.month=t.month,this.init()})}init(){this.transactionService.getAllTransactionsOfMonth({year:this.year,month:this.dateService.getMonthValue(this.month)}).subscribe({next:t=>{this.transactions=t.map(e=>({transaction:e,included:!1})),this.transactions=this.transactions.reverse(),this.sum=this.currencyManagementService.sum(t),this.dataPoints=t.map(e=>({label:e.date,y:e.value})),this.title=`Analyse im ${this.month}`,this.xTitle="Datum",this.yTitle="\u20AC",setTimeout(()=>this.loaded=!0)},error:t=>console.log(t)})}addToSum(t){this.transactions[t].included=!0,this.currentSum+=this.transactions[t].transaction.value,this.indexes.push(t)}removeFromSum(t){this.transactions[t].included=!1,this.currentSum-=this.transactions[t].transaction.value,this.indexes=this.indexes.filter(e=>e!=t)}editTransaction(t){this.observer.detailNotify({type:"update",object:t.transaction})}deleteTransaction(t){this.transactionService.deleteTransaction({id:t.transaction.id||0}).subscribe({next:()=>{this.observer.updateNotify(t)}})}static{this.\u0275fac=function(e){return new(e||i)(c(b),c(x),c(y),c(j),c(N),c(V))}}static{this.\u0275cmp=f({type:i,selectors:[["app-month-details"]],standalone:!0,features:[v],decls:3,vars:2,consts:[["loading",""],["included",""],[4,"ngIf","ngIfElse"],[3,"title","usingDate","vibDataPoints","xTitle","yTitle"],["id","current-sum",4,"ngIf"],[1,"table","table-hover"],[4,"ngFor","ngForOf"],["id","current-sum"],["mat-mini-fab","","matTooltip","Verarbeiten","matTooltipPosition","left","data-bs-toggle","modal","data-bs-target","#staticBackdrop","color","primary",3,"click"],["mat-mini-fab","","matTooltip","L\xF6schen","matTooltipPosition","left","color","warn",3,"click"],["mat-mini-fab","","color","basic","matTooltip","Zur Summe hinzuf\xFCgen","matTooltipPosition","left",3,"click",4,"ngIf","ngIfElse"],["mat-mini-fab","","color","basic","matTooltip","Zur Summe hinzuf\xFCgen","matTooltipPosition","left",3,"click"],["mat-mini-fab","","matTooltip","Aus Summe Entfernen","matTooltipPosition","left","color","warn",3,"click"]],template:function(e,r){if(e&1&&h(0,_t,22,9,"div",2)(1,xt,1,0,"ng-template",null,0,D),e&2){let m=T(2);p("ngIf",r.loaded)("ngIfElse",m)}},dependencies:[_,F,A,Q,K,H,q,k,X,W],styles:["#current-sum[_ngcontent-%COMP%]{background-color:#f3cef3;margin-left:10rem;margin-right:10rem;padding:2rem;border-radius:20px;box-shadow:0 6px 20px #0003,0 6px 20px #00000030;text-align:center}app-month-details[_ngcontent-%COMP%]{height:100%}.Btn[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:flex-start;width:45px;height:45px;border:none;border-radius:50%;cursor:pointer;position:relative;overflow:hidden;transition-duration:.3s;box-shadow:2px 2px 10px #0003;background-color:#ff4141}.sign[_ngcontent-%COMP%]{width:100%;transition-duration:.3s;display:flex;align-items:center;justify-content:center}.sign[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:17px}.sign[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]   path[_ngcontent-%COMP%]{fill:#fff}.text[_ngcontent-%COMP%]{position:absolute;right:0%;width:0%;opacity:0;color:#fff;font-size:1.2em;font-weight:600;transition-duration:.3s}"]})}}return i})();function yt(i,d){if(i&1&&(n(0,"tbody")(1,"tr")(2,"td"),a(3),o(),n(4,"td"),a(5),o()()()),i&2){let t=d.$implicit,e=l(2);s(3),I(t.label),s(2),g("",e.currencyManagementService.numberInEUR(t.y)," | ",e.currencyManagementService.numberInVND(e.Math.round(t.y*e.rate)),"")}}function bt(i,d){if(i&1&&(n(0,"div"),u(1,"app-graph",2),n(2,"table",3)(3,"thead")(4,"tr")(5,"th"),a(6,"Monat"),o(),n(7,"th"),a(8,"Betrag"),o()()(),h(9,yt,6,3,"tbody",4),n(10,"tbody")(11,"tr")(12,"th"),a(13,"Summe"),o(),n(14,"td"),a(15),o()()()()()),i&2){let t=l();s(),p("title",t.title)("vibDataPoints",t.dataPoints)("xTitle",t.xTitle)("yTitle",t.yTitle),s(8),p("ngForOf",t.dataPoints),s(6),g("",t.currencyManagementService.numberInEUR(t.sum)," | ",t.currencyManagementService.numberInVND(t.Math.round(t.sum*t.rate))," ")}}function St(i,d){i&1&&u(0,"app-loader")}var st=(()=>{class i{constructor(t,e,r,m,R,Y){this.transactionService=t,this.router=e,this.currencyService=r,this.currencyManagementService=m,this.dateService=R,this.observer=Y,this.loaded=!1,this.rate=1,this.months=[],this.year=0,this.sum=0,this.dataPoints=[],this.title="",this.xTitle="",this.yTitle="",this.Math=Math}ngOnInit(){this.observer.objectUpdate$.subscribe(t=>{t&&this.init()}),this.title="Monatliche Analyse",this.xTitle="Monat",this.yTitle="\u20AC",this.currencyService.getTodayRate({bank:"vib"}).subscribe({next:t=>{this.rate=t.rate||0}}),this.router.params.subscribe(t=>{this.year=t.year,this.init()})}init(){this.transactionService.getAllMonthTotals({year:this.year}).subscribe({next:t=>{this.sum=0,this.dataPoints=t.map(e=>({label:this.dateService.getMonthNameDE(this.capitalize(e.month||"")),y:e.total})),this.months=t.map(e=>this.capitalize(e.month||"")),t.map(e=>e.total).forEach(e=>this.sum+=e||0),setTimeout(()=>this.loaded=!0)}})}capitalize(t){let e=t.toLowerCase();return e.charAt(0).toUpperCase()+e.slice(1)}static{this.\u0275fac=function(e){return new(e||i)(c(b),c(x),c(j),c(N),c(y),c(V))}}static{this.\u0275cmp=f({type:i,selectors:[["app-year-details"]],standalone:!0,features:[v],decls:3,vars:2,consts:[["loading",""],[4,"ngIf","ngIfElse"],[3,"title","vibDataPoints","xTitle","yTitle"],[1,"table","table-hover"],[4,"ngFor","ngForOf"]],template:function(e,r){if(e&1&&h(0,bt,16,7,"div",1)(1,St,1,0,"ng-template",null,0,D),e&2){let m=T(2);p("ngIf",r.loaded)("ngIfElse",m)}},dependencies:[_,J,F,A,k],styles:["app-year-details[_ngcontent-%COMP%]{height:100%}"]})}}return i})();var Mt=[{path:":year",component:ot,children:[{path:"",component:st},{path:"months/:month",component:at}]}],ct=(()=>{class i{static{this.\u0275fac=function(e){return new(e||i)}}static{this.\u0275mod=O({type:i})}static{this.\u0275inj=w({imports:[L.forChild(Mt),L]})}}return i})();var Xt=(()=>{class i{static{this.\u0275fac=function(e){return new(e||i)}}static{this.\u0275mod=O({type:i})}static{this.\u0275inj=w({imports:[U,ct]})}}return i})();export{Xt as YearOverviewModule};
