import{a as Z,b as H,d as K,e as Q,h as b,i as N,j as W}from"./chunk-MFTLXP5R.js";import{a as S}from"./chunk-HUGQ5NZ4.js";import{g as _,h as J,j as $,ma as tt,na as V,oa as P,pa as A,qa as R}from"./chunk-HVHTCMX4.js";import{Cb as I,Eb as d,Hb as z,Jb as X,Ob as T,Pb as s,Qb as E,Rb as q,Sb as y,Ta as Y,Va as m,Wa as l,Xb as v,Yb as D,aa as O,ka as f,la as F,lb as u,nb as p,ra as U,sa as C,ta as M,vc as x,wb as a,wc as j,xb as o,yb as h,zb as k,zc as G}from"./chunk-IPVIUVLN.js";function mt(r,i){if(r&1&&(a(0,"div")(1,"li",1)(2,"div",4)(3,"a",5),s(4),o(),a(5,"div",6),h(6,"span",7)(7,"span",8)(8,"span",9)(9,"span",10)(10,"span",11)(11,"span",12)(12,"span",13),o()()()()),r&2){let n=i.$implicit,e=d();m(3),z("id",n),X("href","years/",e.year,"/months/",n,"",Y),m(),q(" ",e.dateService.getMonthNameDE(n)," ")}}var rt=(()=>{let i=class i{constructor(e,t,c){this.transactionService=e,this.router=t,this.dateService=c,this.months=[],this.year=0}ngOnInit(){this.year=this.router.snapshot.params.year,this.transactionService.getAllMonths({year:this.year}).subscribe({next:e=>{this.months=e.map(t=>this.capitalize(t))},error:e=>console.log(e)})}capitalize(e){let t=e.toLowerCase();return t.charAt(0).toUpperCase()+t.slice(1)}};i.\u0275fac=function(t){return new(t||i)(l(b),l(_),l(S))},i.\u0275cmp=f({type:i,selectors:[["app-navigation-year"]],standalone:!0,features:[v],decls:5,vars:1,consts:[[1,"nav","flex-column"],[1,"nav-item"],["aria-disabled","true",1,"nav-link","disabled"],[4,"ngFor","ngForOf"],[1,"box"],[1,"nav-link","nav-nav",3,"id","href"],[1,"space"],[1,"star",2,"--i","31"],[1,"star",2,"--i","12"],[1,"star",2,"--i","57"],[1,"star",2,"--i","93"],[1,"star",2,"--i","23"],[1,"star",2,"--i","70"],[1,"star",2,"--i","6"]],template:function(t,c){t&1&&(a(0,"ul",0)(1,"li",1)(2,"a",2),s(3,"Monat ausw\xE4hlen"),o()(),u(4,mt,13,5,"div",3),o()),t&2&&(m(4),p("ngForOf",c.months))},dependencies:[x],styles:["a[_ngcontent-%COMP%]{color:#000}"]});let r=i;return r})();function ht(r,i){if(r&1&&(a(0,"tbody")(1,"tr")(2,"td"),s(3),o(),a(4,"td"),s(5),o()()()),r&2){let n=i.$implicit,e=d(2);m(3),E(n.label),m(2),y("",e.currencyManagementService.numberInEUR(n.y)," | ",e.currencyManagementService.numberInVND(e.Math.round(n.y*e.rate)),"")}}function ut(r,i){if(r&1&&(a(0,"div"),h(1,"app-graph",2),a(2,"table",3)(3,"thead")(4,"tr")(5,"th"),s(6,"Monat"),o(),a(7,"th"),s(8,"Betrag"),o()()(),u(9,ht,6,3,"tbody",4),a(10,"tbody")(11,"tr")(12,"th"),s(13,"Summe"),o(),a(14,"td"),s(15),o()()()()()),r&2){let n=d();m(),p("setTitle",n.title)("setVIB",n.dataPoints)("setXTitle",n.xTitle)("setYTitle",n.yTitle),m(8),p("ngForOf",n.dataPoints),m(6),y("",n.currencyManagementService.numberInEUR(n.sum)," | ",n.currencyManagementService.numberInVND(n.Math.round(n.sum*n.rate))," ")}}function ft(r,i){r&1&&h(0,"app-loader")}var at=(()=>{let i=class i{constructor(e,t,c,g,B,L){this.transactionService=e,this.router=t,this.currencyService=c,this.currencyManagementService=g,this.dateService=B,this.observer=L,this.loaded=!1,this.rate=1,this.months=[],this.year=0,this.sum=0,this.dataPoints=[],this.title="",this.xTitle="",this.yTitle="",this.Math=Math}ngOnInit(){this.year=this.router.snapshot.params.year,this.init(),this.observer.objectUpdate$.subscribe(e=>{e&&this.init()}),this.title="Monatliche Analyse",this.xTitle="Monat",this.yTitle="\u20AC",this.currencyService.getTodayRate({bank:"vib"}).subscribe({next:e=>{this.rate=e.rate||0}})}init(){this.transactionService.getAllMonthTotals({year:this.year}).subscribe({next:e=>{this.sum=0,this.dataPoints=e.map(t=>({label:this.dateService.getMonthNameDE(this.capitalize(t.month||"")),y:t.total})),this.months=e.map(t=>this.capitalize(t.month||"")),e.map(t=>t.total).forEach(t=>this.sum+=t||0),this.loaded=!0}})}capitalize(e){let t=e.toLowerCase();return t.charAt(0).toUpperCase()+t.slice(1)}};i.\u0275fac=function(t){return new(t||i)(l(b),l(_),l(V),l(P),l(S),l(N))},i.\u0275cmp=f({type:i,selectors:[["app-year-details"]],standalone:!0,features:[v],decls:3,vars:2,consts:[["loading",""],[4,"ngIf","ngIfElse"],[3,"setTitle","setVIB","setXTitle","setYTitle"],[1,"table","table-hover"],[4,"ngFor","ngForOf"]],template:function(t,c){if(t&1&&u(0,ut,16,7,"div",1)(1,ft,1,0,"ng-template",null,0,D),t&2){let g=T(2);p("ngIf",c.loaded)("ngIfElse",g)}},dependencies:[x,tt,j,A,R],styles:["app-year-details[_ngcontent-%COMP%]{height:100%}"]});let r=i;return r})();var ot=(()=>{let i=class i{ngOnInit(){let e=window.location.href.split("/");e.includes("years")&&(document.querySelectorAll(".nav-link").forEach(t=>{t.classList.remove("active")}),document.getElementById(e[e.indexOf("years")+1])?.classList.add("active"))}};i.\u0275fac=function(t){return new(t||i)},i.\u0275cmp=f({type:i,selectors:[["app-overview-page"]],standalone:!0,features:[v],decls:6,vars:0,consts:[[1,"row",2,"height","100%"],[1,"col-1"],[1,"col",2,"height","100%"]],template:function(t,c){t&1&&(a(0,"div",0)(1,"div",1),h(2,"app-navigation-year"),o(),a(3,"div",2),h(4,"app-create-transaction")(5,"router-outlet"),o()())},dependencies:[W,rt,J]});let r=i;return r})();function vt(r,i){if(r&1&&(a(0,"h1",7),s(1),o()),r&2){let n=d(2);m(),y(" Aktuelle Summe: ",n.currentSum.toFixed(2)," \u20AC | ",n.currencyManagementService.numberInVND(n.Math.round(n.currentSum)*n.rate)," VND ")}}function gt(r,i){if(r&1){let n=k();a(0,"button",11),I("click",function(){C(n);let t=d().$implicit,c=d(2);return M(c.addToSum(t))}),a(1,"mat-icon"),s(2,"add"),o()()}}function yt(r,i){if(r&1){let n=k();a(0,"button",9),I("click",function(){C(n);let t=d().$implicit,c=d(2);return M(c.removeFromSum(t))}),a(1,"mat-icon"),s(2,"remove"),o()()}}function xt(r,i){if(r&1){let n=k();a(0,"tbody")(1,"tr")(2,"td"),s(3),o(),a(4,"td"),s(5),o(),a(6,"td"),s(7),o(),a(8,"td")(9,"button",8),I("click",function(){let t=C(n).$implicit,c=d(2);return M(c.editTransaction(c.transactions[t]))}),a(10,"mat-icon"),s(11,"edit"),o()()(),a(12,"td")(13,"button",9),I("click",function(){let t=C(n).$implicit,c=d(2);return M(c.deleteTransaction(c.transactions[t]))}),a(14,"mat-icon"),s(15,"delete"),o()()(),a(16,"td"),u(17,gt,3,0,"button",10)(18,yt,3,0,"ng-template",null,1,D),o()()()}if(r&2){let n=i.$implicit,e=T(19),t=d(2);m(3),E(t.dateService.reformatDate(t.transactions[n].transaction.date||"")),m(2),y("",t.currencyManagementService.numberInEUR(t.transactions[n].transaction.value)," | ",t.currencyManagementService.numberInVND(t.Math.round(((t.transactions[n]==null?null:t.transactions[n].transaction.value)||1)*t.rate)),""),m(2),E(t.transactions[n].transaction.description),m(10),p("ngIf",!t.transactions[n].included)("ngIfElse",e)}}function _t(r,i){if(r&1&&(a(0,"div"),h(1,"app-graph",3),u(2,vt,2,2,"h1",4),a(3,"table",5)(4,"thead")(5,"tr")(6,"th"),s(7,"Datum"),o(),a(8,"th"),s(9,"Betrag"),o(),a(10,"th"),s(11,"Zweck"),o(),h(12,"th")(13,"th")(14,"th"),o()(),u(15,xt,20,6,"tbody",6),a(16,"tbody")(17,"tr")(18,"th"),s(19,"Summe"),o(),a(20,"td"),s(21),o()()()()()),r&2){let n=d();m(),p("setTitle",n.title)("setVIB",n.dataPoints)("setXTitle",n.xTitle)("setYTitle",n.yTitle),m(),p("ngIf",n.indexes.length),m(13),p("ngForOf",n.Array.from(n.Array(n.transactions.length).keys())),m(6),y("",n.currencyManagementService.numberInEUR(n.sum)," | ",n.currencyManagementService.numberInVND(n.Math.round(n.sum*n.rate))," ")}}function bt(r,i){r&1&&h(0,"app-loader")}var st=(()=>{let i=class i{constructor(e,t,c,g,B,L){this.transactionService=e,this.router=t,this.dateService=c,this.currencyService=g,this.currencyManagementService=B,this.observer=L,this.loaded=!1,this.rate=1,this.year=0,this.month="",this.transactions=[],this.indexes=[],this.sum=0,this.dataPoints=[],this.currentSum=0,this.title="",this.xTitle="",this.yTitle="",this.Math=Math,this.Array=Array}ngOnChanges(e){console.log("change")}ngOnInit(){this.observer.objectUpdate$.subscribe(e=>{e&&this.init()}),this.currencyService.getTodayRate({bank:"vib"}).subscribe({next:e=>{this.rate=e.rate||0}}),this.year=Number(window.location.href.split("/")[4]),this.month=this.router.snapshot.params.month,this.init(),setTimeout(()=>{window.location.href.split("/").includes("months")&&(document.querySelectorAll(".nav-link").forEach(t=>{t.classList.remove("active")}),document.getElementById(String(this.year))?.classList.add("active"),document.getElementById(String(this.month))?.classList.add("active"))},100)}init(){this.transactionService.getAllTransactionsOfMonth({year:this.year,month:this.dateService.getMonthValue(this.month)}).subscribe({next:e=>{this.transactions=e.map(t=>({transaction:t,included:!1})),this.transactions=this.transactions.reverse(),this.sum=this.currencyManagementService.sum(e),this.dataPoints=e.map(t=>({label:this.dateService.reformatDate(t.date||""),y:t.value})),this.title=`Analyse im ${this.month}`,this.xTitle="Datum",this.yTitle="\u20AC",setTimeout(()=>this.loaded=!0,200)},error:e=>console.log(e)})}addToSum(e){this.transactions[e].included=!0,this.currentSum+=this.transactions[e].transaction.value,this.indexes.push(e)}removeFromSum(e){this.transactions[e].included=!1,this.currentSum-=this.transactions[e].transaction.value,this.indexes=this.indexes.filter(t=>t!=e)}editTransaction(e){this.observer.detailNotify({type:"update",object:e.transaction})}deleteTransaction(e){this.transactionService.deleteTransaction({id:e.transaction.id||0}).subscribe({next:()=>{this.observer.updateNotify(e)}})}};i.\u0275fac=function(t){return new(t||i)(l(b),l(_),l(S),l(V),l(P),l(N))},i.\u0275cmp=f({type:i,selectors:[["app-month-details"]],standalone:!0,features:[U,v],decls:3,vars:2,consts:[["loading",""],["included",""],[4,"ngIf","ngIfElse"],[3,"setTitle","setVIB","setXTitle","setYTitle"],["id","current-sum",4,"ngIf"],[1,"table","table-hover"],[4,"ngFor","ngForOf"],["id","current-sum"],["mat-mini-fab","","data-bs-toggle","modal","data-bs-target","#staticBackdrop","color","primary",3,"click"],["mat-mini-fab","","color","warn",3,"click"],["mat-mini-fab","","color","basic",3,"click",4,"ngIf","ngIfElse"],["mat-mini-fab","","color","basic",3,"click"]],template:function(t,c){if(t&1&&u(0,_t,22,8,"div",2)(1,bt,1,0,"ng-template",null,0,D),t&2){let g=T(2);p("ngIf",c.loaded)("ngIfElse",g)}},dependencies:[x,j,A,Q,K,H,Z,R],styles:["#current-sum[_ngcontent-%COMP%]{background-color:#f3cef3;margin-left:10rem;margin-right:10rem;padding:2rem;border-radius:20px;box-shadow:0 6px 20px #0003,0 6px 20px #00000030;text-align:center}app-month-details[_ngcontent-%COMP%]{height:100%}.Btn[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:flex-start;width:45px;height:45px;border:none;border-radius:50%;cursor:pointer;position:relative;overflow:hidden;transition-duration:.3s;box-shadow:2px 2px 10px #0003;background-color:#ff4141}.sign[_ngcontent-%COMP%]{width:100%;transition-duration:.3s;display:flex;align-items:center;justify-content:center}.sign[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:17px}.sign[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]   path[_ngcontent-%COMP%]{fill:#fff}.text[_ngcontent-%COMP%]{position:absolute;right:0%;width:0%;opacity:0;color:#fff;font-size:1.2em;font-weight:600;transition-duration:.3s}"]});let r=i;return r})();var St=[{path:":year",component:ot,children:[{path:"",component:at},{path:"months/:month",component:st}]}],ct=(()=>{let i=class i{};i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=F({type:i}),i.\u0275inj=O({imports:[$.forChild(St),$]});let r=i;return r})();var Kt=(()=>{let i=class i{};i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=F({type:i}),i.\u0275inj=O({imports:[G,ct]});let r=i;return r})();export{Kt as YearOverviewModule};
