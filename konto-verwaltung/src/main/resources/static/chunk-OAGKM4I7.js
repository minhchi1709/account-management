import{a as Z,c as H,e as K,f as Q,i as b,j as A,k as W,l as $}from"./chunk-OI2KO3XB.js";import{a as M}from"./chunk-HWVXGORX.js";import{g as _,h as J,j as L,ma as tt,na as O,oa as V,pa as P,qa as R}from"./chunk-S4C5R5PF.js";import{Ab as N,Ac as G,Db as T,Fb as d,Ib as X,Kb as q,Pb as E,Qb as c,Rb as y,Ta as z,Tb as x,Va as m,Wa as l,Yb as v,Zb as D,aa as F,ka as f,la as j,lb as u,nb as p,ra as Y,sa as C,ta as I,wb as a,wc as S,xb as o,xc as k,yb as h}from"./chunk-DWDGEKHO.js";function mt(r,i){if(r&1&&(a(0,"div")(1,"li",1)(2,"a",4),c(3),o()()()),r&2){let n=i.$implicit,t=d();m(2),X("id",n),q("href","years/",t.year,"/months/",n,"",z),m(),y(t.dateService.getMonthNameDE(n))}}var rt=(()=>{let i=class i{constructor(t,e,s){this.transactionService=t,this.router=e,this.dateService=s,this.months=[],this.year=0}ngOnInit(){this.year=this.router.snapshot.params.year,this.transactionService.getAllMonths({year:this.year}).subscribe({next:t=>{this.months=t.map(e=>this.capitalize(e))},error:t=>console.log(t)})}capitalize(t){let e=t.toLowerCase();return e.charAt(0).toUpperCase()+e.slice(1)}};i.\u0275fac=function(e){return new(e||i)(l(b),l(_),l(M))},i.\u0275cmp=f({type:i,selectors:[["app-navigation-year"]],standalone:!0,features:[v],decls:5,vars:1,consts:[[1,"nav","flex-column"],[1,"nav-item"],["aria-disabled","true",1,"nav-link","disabled"],[4,"ngFor","ngForOf"],["aria-disabled","true",1,"nav-link",3,"id","href"]],template:function(e,s){e&1&&(a(0,"ul",0)(1,"li",1)(2,"a",2),c(3,"Monat ausw\xE4hlen"),o()(),u(4,mt,4,5,"div",3),o()),e&2&&(m(4),p("ngForOf",s.months))},dependencies:[S],styles:["a[_ngcontent-%COMP%]{color:#000}"]});let r=i;return r})();function ht(r,i){if(r&1&&(a(0,"tbody")(1,"tr")(2,"td"),c(3),o(),a(4,"td"),c(5),o()()()),r&2){let n=i.$implicit,t=d(2);m(3),y(n.label),m(2),x("",t.currencyManagementService.numberInEUR(n.y)," | ",t.currencyManagementService.numberInVND(t.Math.round(n.y*t.rate)),"")}}function ft(r,i){if(r&1&&(a(0,"div"),h(1,"app-graph",2),a(2,"table",3)(3,"thead")(4,"tr")(5,"th"),c(6,"Monat"),o(),a(7,"th"),c(8,"Betrag"),o()()(),u(9,ht,6,3,"tbody",4),a(10,"tbody")(11,"tr")(12,"th"),c(13,"Summe"),o(),a(14,"td"),c(15),o()()()()()),r&2){let n=d();m(),p("setTitle",n.title)("setData1",n.dataPoints)("setXTitle",n.xTitle)("setYTitle",n.yTitle),m(8),p("ngForOf",n.dataPoints),m(6),x("",n.currencyManagementService.numberInEUR(n.summe)," | ",n.currencyManagementService.numberInVND(n.Math.round(n.summe*n.rate))," ")}}function vt(r,i){r&1&&(a(0,"div",5)(1,"div",6),h(2,"mat-spinner"),o()())}var at=(()=>{let i=class i{constructor(t,e,s,g,U,B){this.transactionService=t,this.router=e,this.currencyService=s,this.currencyManagementService=g,this.dateSerivce=U,this.observer=B,this.loaded=!1,this.rate=1,this.monate=[],this.year=0,this.summe=0,this.dataPoints=[],this.title="",this.xTitle="",this.yTitle="",this.Math=Math}ngOnInit(){this.year=this.router.snapshot.params.year,this.init(),this.observer.objectUpdate$.subscribe(t=>{t&&this.init()}),this.title="Monatliche Analyse",this.xTitle="Monat",this.yTitle="\u20AC",this.currencyService.getTodayVibCurrency().subscribe({next:t=>{this.rate=t.rate||0}})}init(){this.transactionService.getAllMonths({year:this.year}).subscribe({next:t=>{this.transactionService.getAllMonthTotals({year:this.year}).subscribe({next:e=>{this.summe=0,this.dataPoints=e.map(s=>({label:this.dateSerivce.getMonthNameDE(this.capitalize(s.month||"")),y:s.total})),this.monate=e.map(s=>this.capitalize(s.month||"")),e.map(s=>s.total).forEach(s=>this.summe+=s||0),this.loaded=!0}})}})}capitalize(t){let e=t.toLowerCase();return e.charAt(0).toUpperCase()+e.slice(1)}};i.\u0275fac=function(e){return new(e||i)(l(b),l(_),l(R),l($),l(M),l(A))},i.\u0275cmp=f({type:i,selectors:[["app-year-details"]],standalone:!0,features:[v],decls:3,vars:2,consts:[["loading",""],[4,"ngIf","ngIfElse"],[3,"setTitle","setData1","setXTitle","setYTitle"],[1,"table","table-hover"],[4,"ngFor","ngForOf"],[1,"d-flex","justify-content-center"],["role","status",2,"width","3rem","height","3rem","margin-top","20%"]],template:function(e,s){if(e&1&&u(0,ft,16,7,"div",1)(1,vt,3,0,"ng-template",null,0,D),e&2){let g=E(2);p("ngIf",s.loaded)("ngIfElse",g)}},dependencies:[S,tt,k,O,P,V]});let r=i;return r})();var ot=(()=>{let i=class i{ngOnInit(){let t=window.location.href.split("/");t.includes("years")&&(document.querySelectorAll(".nav-link").forEach(e=>{e.classList.remove("active")}),document.getElementById(t[t.indexOf("years")+1])?.classList.add("active"))}};i.\u0275fac=function(e){return new(e||i)},i.\u0275cmp=f({type:i,selectors:[["app-overview-page"]],standalone:!0,features:[v],decls:6,vars:0,consts:[[1,"row"],[1,"col-1"],[1,"col"]],template:function(e,s){e&1&&(a(0,"div",0)(1,"div",1),h(2,"app-navigation-year"),o(),a(3,"div",2),h(4,"app-create-transaction")(5,"router-outlet"),o()())},dependencies:[W,rt,J]});let r=i;return r})();function gt(r,i){if(r&1&&(a(0,"h1",7),c(1),o()),r&2){let n=d(2);m(),x(" Aktuelle Summe: ",n.currentSum.toFixed(2)," \u20AC | ",n.currencyManagementService.numberInVND(n.Math.round(n.currentSum)*n.rate)," VND ")}}function yt(r,i){if(r&1){let n=N();a(0,"button",11),T("click",function(){C(n);let e=d().$implicit,s=d(2);return I(s.addToSum(e))}),a(1,"mat-icon"),c(2,"add"),o()()}}function xt(r,i){if(r&1){let n=N();a(0,"button",9),T("click",function(){C(n);let e=d().$implicit,s=d(2);return I(s.removeFromSum(e))}),a(1,"mat-icon"),c(2,"remove"),o()()}}function St(r,i){if(r&1){let n=N();a(0,"tbody")(1,"tr")(2,"td"),c(3),o(),a(4,"td"),c(5),o(),a(6,"td"),c(7),o(),a(8,"td")(9,"button",8),T("click",function(){let e=C(n).$implicit,s=d(2);return I(s.editTransaction(s.transactions[e]))}),a(10,"mat-icon"),c(11,"edit"),o()()(),a(12,"td")(13,"button",9),T("click",function(){let e=C(n).$implicit,s=d(2);return I(s.deleteTransaction(s.transactions[e]))}),a(14,"mat-icon"),c(15,"delete"),o()()(),a(16,"td"),u(17,yt,3,0,"button",10)(18,xt,3,0,"ng-template",null,1,D),o()()()}if(r&2){let n=i.$implicit,t=E(19),e=d(2);m(3),y(e.dateService.reformatDate(e.transactions[n].transaction.date||"")),m(2),x("",e.currencyManagementService.numberInEUR(e.transactions[n].transaction.value)," | ",e.currencyManagementService.numberInVND(e.Math.round(((e.transactions[n]==null?null:e.transactions[n].transaction.value)||1)*e.rate)),""),m(2),y(e.transactions[n].transaction.description),m(10),p("ngIf",!e.transactions[n].included)("ngIfElse",t)}}function _t(r,i){if(r&1&&(a(0,"div"),h(1,"app-graph",3),u(2,gt,2,2,"h1",4),a(3,"table",5)(4,"thead")(5,"tr")(6,"th"),c(7,"Datum"),o(),a(8,"th"),c(9,"Betrag"),o(),a(10,"th"),c(11,"Zweck"),o(),h(12,"th")(13,"th")(14,"th"),o()(),u(15,St,20,6,"tbody",6),a(16,"tbody")(17,"tr")(18,"th"),c(19,"Summe"),o(),a(20,"td"),c(21),o()()()()()),r&2){let n=d();m(),p("setTitle",n.title)("setData1",n.dataPoints)("setXTitle",n.xTitle)("setYTitle",n.yTitle),m(),p("ngIf",n.indexes.length),m(13),p("ngForOf",n.Array.from(n.Array(n.transactions.length).keys())),m(6),x("",n.currencyManagementService.numberInEUR(n.sum)," | ",n.currencyManagementService.numberInVND(n.Math.round(n.sum*n.rate))," ")}}function bt(r,i){r&1&&(a(0,"div",12)(1,"div",13),h(2,"mat-spinner"),o()())}var st=(()=>{let i=class i{constructor(t,e,s,g,U,B){this.transactionService=t,this.router=e,this.dateService=s,this.currencyService=g,this.currencyManagementService=U,this.observer=B,this.loaded=!1,this.rate=1,this.year=0,this.month="",this.transactions=[],this.indexes=[],this.sum=0,this.dataPoints=[],this.currentSum=0,this.title="",this.xTitle="",this.yTitle="",this.Math=Math,this.Array=Array}ngOnChanges(t){console.log("change")}ngOnInit(){this.observer.objectUpdate$.subscribe(t=>{t&&this.init()}),this.currencyService.getTodayVibCurrency().subscribe({next:t=>{this.rate=t.rate||0}}),this.year=Number(window.location.href.split("/")[4]),this.month=this.router.snapshot.params.month,this.init(),setTimeout(()=>{window.location.href.split("/").includes("months")&&(document.querySelectorAll(".nav-link").forEach(e=>{e.classList.remove("active")}),document.getElementById(String(this.year))?.classList.add("active"),document.getElementById(String(this.month))?.classList.add("active"))},100)}init(){this.transactionService.getAllTransactionsOfMonth({year:this.year,month:this.dateService.getMonthValue(this.month)}).subscribe({next:t=>{this.transactions=t.map(e=>({transaction:e,included:!1})),this.transactions=this.transactions.reverse(),this.sum=this.currencyManagementService.sum(t),this.dataPoints=t.map(e=>({label:this.dateService.reformatDate(e.date||""),y:e.value})),this.title=`Analyse im ${this.month}`,this.xTitle="Datum",this.yTitle="\u20AC",setTimeout(()=>this.loaded=!0,200)},error:t=>console.log(t)})}addToSum(t){this.transactions[t].included=!0,this.currentSum+=this.transactions[t].transaction.value,this.indexes.push(t)}removeFromSum(t){this.transactions[t].included=!1,this.currentSum-=this.transactions[t].transaction.value,this.indexes=this.indexes.filter(e=>e!=t)}editTransaction(t){this.observer.detailNotify({type:"update",object:t.transaction})}deleteTransaction(t){this.transactionService.deleteTransaction({id:t.transaction.id||0}).subscribe({next:()=>{this.observer.updateNotify(t)}})}};i.\u0275fac=function(e){return new(e||i)(l(b),l(_),l(M),l(R),l($),l(A))},i.\u0275cmp=f({type:i,selectors:[["app-month-details"]],standalone:!0,features:[Y,v],decls:3,vars:2,consts:[["loading",""],["included",""],[4,"ngIf","ngIfElse"],[3,"setTitle","setData1","setXTitle","setYTitle"],["id","current-sum",4,"ngIf"],[1,"table","table-hover"],[4,"ngFor","ngForOf"],["id","current-sum"],["mat-mini-fab","","data-bs-toggle","modal","data-bs-target","#staticBackdrop","color","primary",3,"click"],["mat-mini-fab","","color","warn",3,"click"],["mat-mini-fab","","color","basic",3,"click",4,"ngIf","ngIfElse"],["mat-mini-fab","","color","basic",3,"click"],[1,"d-flex","justify-content-center"],["role","status",2,"width","3rem","height","3rem","margin-top","20%"]],template:function(e,s){if(e&1&&u(0,_t,22,8,"div",2)(1,bt,3,0,"ng-template",null,0,D),e&2){let g=E(2);p("ngIf",s.loaded)("ngIfElse",g)}},dependencies:[S,k,O,Q,K,H,Z,P,V],styles:["#current-sum[_ngcontent-%COMP%]{background-color:#f3cef3;margin-left:10rem;margin-right:10rem;padding:2rem;border-radius:20px;box-shadow:0 6px 20px #0003,0 6px 20px #00000030;text-align:center}"]});let r=i;return r})();var Mt=[{path:":year",component:ot,children:[{path:"",component:at},{path:"months/:month",component:st}]}],ct=(()=>{let i=class i{};i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=j({type:i}),i.\u0275inj=F({imports:[L.forChild(Mt),L]});let r=i;return r})();var Qt=(()=>{let i=class i{};i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=j({type:i}),i.\u0275inj=F({imports:[G,ct]});let r=i;return r})();export{Qt as YearOverviewModule};
